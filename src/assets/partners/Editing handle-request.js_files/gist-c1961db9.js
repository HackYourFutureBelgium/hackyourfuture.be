System.register(["./chunk-vendor.js","./chunk-frameworks.js"],(function(e,t){"use strict";var s,n,o,r,c,i,a,l,u,f,d,g,j;return{setters:[function(e){s=e.o,n=e.a,o=e.r},function(e){r=e.o,c=e.T,i=e.h,a=e.W,l=e.f,u=e.O,f=e.X,d=e.Y,g=e.Z,j=e.r}],execute:function(){function e(e){const t=e.querySelector(".js-gist-files"),s=document.getElementById("js-gist-file-template"),n=document.createElement("div");n.innerHTML=s.textContent;for(const r of n.querySelectorAll("[id]"))r.removeAttribute("id");const o=n.querySelector(".js-code-textarea");null!=o&&o.setAttribute("id",`blob_contents_${Date.now()}`);for(const r of n.children)t.append(r);return t.lastElementChild}function m(e){return c(e.closest(".js-code-editor"))}async function h(e){const t=e.getAttribute("data-language-detection-url");if(!t)return;const s=new URL(t,window.location.origin),n=new URLSearchParams(s.search.slice(1));n.append("filename",e.value),s.search=n.toString();const o=await l(s.toString());(await m(e)).setMode(o.language)}function y(e){const t=e.querySelectorAll(".js-remove-gist-file");for(const s of t)s.classList.toggle("d-none",t.length<2)}r(".js-gist-filename",async e=>{const t=e,s=e.closest(".js-code-editor");await m(s),i(t,h),e.addEventListener("blur",()=>a(t,h),{once:!0})}),s("click",".js-add-gist-file",(function(t){t.preventDefault(),e(t.currentTarget.closest(".js-blob-form")).scrollIntoView()})),s("gist:filedrop",".js-blob-form",(async function(t){const{file:s,data:n}=t.detail,o=function(t){for(const e of t.querySelectorAll(".js-gist-file")){const t=e.querySelector(".js-gist-filename"),s=e.querySelector(".js-blob-contents");if(!t.value&&!s.value)return e}return e(t)}(t.currentTarget),r=o.querySelector(".js-gist-filename");r.value=s.name,h(r),(await m(r)).setCode(n),o.scrollIntoView()})),s("click",".js-remove-gist-file",(function(e){e.preventDefault();const t=e.currentTarget.closest(".js-gist-file");for(const s of t.querySelectorAll(".js-gist-deleted input"))s.disabled=!1;t.querySelector(".js-code-editor").remove()})),n(".js-remove-gist-file",(function(e){const t=e.closest(".js-gist-files");return{add(){y(t)},remove(){y(t)}}})),r(".js-quicksearch-field",(function(e){d(e.form.querySelector(".js-quicksearch-results"))})),u(".js-quicksearch-field",(async function(e){const t=e.target,s=t.value.replace(/^\s+|\s+$/g,""),n=t.closest("form"),o=n.querySelector(".js-quicksearch-results"),r=o.getAttribute("data-quicksearch-url");let c="";null==v||v.abort();const{signal:i}=v=new AbortController;if(s.length){const e=new URL(r,window.location.origin),t=new URLSearchParams(e.search.slice(1));t.append("q",s),e.search=t.toString(),n.classList.add("is-sending");try{const t=await fetch(e.toString(),{signal:i});t.ok&&(c=await t.text())}catch(a){}}if(i.aborted)return;c&&(o.innerHTML=c);o.classList.toggle("active",""!==s),n.classList.remove("is-sending")})),s("navigation:keydown",".js-quicksearch-results",(function(e){const t=e,s=t.target,n=s.closest("form");if("Escape"===t.detail.hotkey){const e=n.querySelector(".js-quicksearch-results");e.classList.remove("active"),g(e)}else"Enter"!==t.detail.hotkey||s.classList.contains("js-navigation-item")||(j(n),t.preventDefault())})),s("submit",".js-quicksearch-form",(function(e){const t=e.currentTarget.querySelector(".js-quicksearch-results");t&&(t.classList.remove("active"),f(t))})),s("focusout:delay",".js-quicksearch-field",(function(e){const t=e.currentTarget.closest("form").querySelector(".js-quicksearch-results");t&&(t.classList.remove("active"),f(t))}));let v=null;o(".js-gist-file-update-container .js-comment-update",(async function(e,t){let s;try{s=await t.json()}catch(n){return}if(e.action=s.json.url,s.json.authenticity_token){e.querySelector("input[name=authenticity_token]").value=s.json.authenticity_token}})),n(".js-gist-dropzone",()=>{t.import("./chunk-drag-drop.js")})}}}));
//# sourceMappingURL=gist-9cb6f83a.js.map
